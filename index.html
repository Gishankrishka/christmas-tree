<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Tree 3D Zoom</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #000; 
            height: 100vh; 
            overflow: hidden; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            perspective: 1500px; /* T·∫°o chi·ªÅu s√¢u cho camera */
            font-family: 'Arial', sans-serif;
        }

        /* S√¢n kh·∫•u 3D */
        .scene {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            transform-style: preserve-3d;
            transition: transform 1.5s cubic-bezier(0.4, 0, 0.2, 1); /* Hi·ªáu ·ª©ng zoom camera */
        }

        .tree {
            position: relative;
            width: 0; height: 0;
            transform-style: preserve-3d;
            animation: rotate 20s infinite linear;
        }

        @keyframes rotate {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(360deg); }
        }

        /* ·∫¢nh ƒë·ªânh top.jpg */
        .star-photo {
            position: absolute;
            width: 120px; height: 120px;
            top: -220px; left: -60px;
            border-radius: 50%;
            border: 5px solid gold;
            box-shadow: 0 0 30px gold;
            object-fit: cover;
            transform: translateZ(0);
        }

        /* 31 t·∫•m ·∫£nh l√° */
        .leaf-photo {
            position: absolute;
            width: 80px; height: 110px;
            border: 3px solid white;
            border-radius: 8px;
            object-fit: cover;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            backface-visibility: visible;
            transition: transform 0.5s;
        }

        /* Hi·ªáu ·ª©ng focus v√†o 1 ·∫£nh */
        .leaf-photo.focus {
            border-color: #ff0000;
            box-shadow: 0 0 30px #ff0000;
            z-index: 1000;
        }

        .message {
            position: fixed;
            bottom: 30px;
            color: white;
            text-align: center;
            text-shadow: 0 0 10px rgba(255,0,0,0.8);
            pointer-events: none;
            transition: opacity 0.5s;
        }

        #ui-layer {
            position: fixed;
            top: 20px; right: 20px;
            z-index: 9999;
        }

        button {
            padding: 12px 24px;
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid white;
            border-radius: 30px;
            cursor: pointer;
            backdrop-filter: blur(10px);
        }

        .snow { position: absolute; top: -10px; color: white; pointer-events: none; z-index: 500; }
    </style>
</head>
<body>

    <div id="ui-layer">
        <button id="start-btn">üéÑ Nh·∫•n ƒë·ªÉ b·∫Øt ƒë·∫ßu (C√≥ nh·∫°c) üéÑ</button>
    </div>

    <audio id="bg-audio" loop>
        <source src="audio.mp3" type="audio/mpeg">
    </audio>

    <div class="scene" id="scene">
        <div class="tree" id="tree-container">
            <img src="public/photos/top.jpg" class="star-photo">
        </div>
    </div>

    <div class="message" id="msg">
        <h1>Merry Christmas 2025</h1>
        <p>Ph√≥ng to t·ª´ng k·ª∑ ni·ªám c·ªßa ch√∫ng ta...</p>
    </div>

    <script>
        const scene = document.getElementById('scene');
        const container = document.getElementById('tree-container');
        const audio = document.getElementById('bg-audio');
        const btn = document.getElementById('start-btn');
        const msg = document.getElementById('msg');
        
        const totalPhotos = 31;
        const photos = [];

        // 1. T·∫°o c√¢y th√¥ng t·ª´ 31 ·∫£nh
        for (let i = 1; i <= totalPhotos; i++) {
            const img = document.createElement('img');
            img.src = `public/photos/${i}.jpg`;
            img.className = 'leaf-photo';
            
            const t = i / totalPhotos; 
            const angle = i * 0.6; 
            const radius = t * 250 + 50; 
            const y = t * 450 - 150;
            const rotY = (angle * 360) % 360;

            img.style.transform = `rotateY(${rotY}deg) translateZ(${radius}px) translateY(${y}px)`;
            
            container.appendChild(img);
            photos.push({ element: img, y: y, angle: rotY, radius: radius });
        }

        // 2. Logic ƒëi·ªÅu khi·ªÉn Camera (Zoom theo video TikTok)
        function autoZoom() {
            // Ch·ªçn ng·∫´u nhi√™n 1 ·∫£nh ƒë·ªÉ ph√≥ng to
            const randomIndex = Math.floor(Math.random() * totalPhotos);
            const target = photos[randomIndex];

            // Highlight ·∫£nh ƒë∆∞·ª£c ch·ªçn
            photos.forEach(p => p.element.classList.remove('focus'));
            target.element.classList.add('focus');

            // T√≠nh to√°n ƒë·ªÉ xoay scene ng∆∞·ª£c l·∫°i h∆∞·ªõng ·∫£nh ƒë·ªÉ ·∫£nh ƒë·ªëi di·ªán camera
            // Ph√≥ng to camera (translateZ) v√† di chuy·ªÉn t√¢m nh√¨n (translateY)
            scene.style.transform = `translateZ(600px) translateY(${-target.y}px)`;
            msg.style.opacity = "0.2";

            // Sau 3 gi√¢y th√¨ zoom out nh√¨n to√†n c·∫£nh
            setTimeout(() => {
                scene.style.transform = `translateZ(0px) translateY(0px)`;
                target.element.classList.remove('focus');
                msg.style.opacity = "1";
            }, 3000);
        }

        // B·∫Øt ƒë·∫ßu hi·ªáu ·ª©ng khi nh·∫•n n√∫t
        btn.onclick = () => {
            audio.play();
            btn.style.display = 'none';
            // L·∫∑p l·∫°i hi·ªáu ·ª©ng zoom m·ªói 6 gi√¢y
            setInterval(autoZoom, 6000);
            autoZoom();
        };

        // Tuy·∫øt r∆°i
        function createSnow() {
            const snow = document.createElement('div');
            snow.className = 'snow';
            snow.innerHTML = '‚ùÑ';
            snow.style.left = Math.random() * 100 + 'vw';
            snow.style.opacity = Math.random();
            document.body.appendChild(snow);
            const anim = snow.animate([{top: '-10px'}, {top: '100vh'}], {duration: Math.random() * 3000 + 2000});
            anim.onfinish = () => snow.remove();
        }
        setInterval(createSnow, 100);
    </script>
</body>
</html>
